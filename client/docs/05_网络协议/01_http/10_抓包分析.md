---
title: HTTP 抓包分析
date: 2021-10-21 15:00:00
permalink: /http/capture
categories:
  - 其他
  - HTTP
tags:
  - null
---

# 抓包分析

基于 `Wireshark` 工具进行的抓包分析，使用 `PostWoman` 谷歌插件进行 `HTTP` 调试

## 握手建立连接阶段

三次握手是 `TCP` 层面的，是 `TCP` 用来建立连接操作，可操作

![image-20220610111925586](/img/126.png)

1. 客户端发起建立连接：`63074 -> 5000 [SYN] Seq=0 Win=8192 Len=0 MSS=65475 WS=256 SACK_PERM=1`

   **客户端(端口 `63074`) 向服务端(端口 `5000`) 发送一个 `[SYN]` 标识的消息，请求建立连接**

2. 服务端响应客户端的连接：`5000 -> 63074 [SYN, ACK] Seq=0 Ack=1 Win=8192 Len=@ MSS=65475 WS=256 SACK _PERM=1`

   **服务端发送 `[ACK]` 表示收到客户端请求的包，发送 `[SYN]` 标识表示同意建立连接，这两个会在一个包中发送出去**

3. 客户端发送收到服务端包的消息：`63074 -> 5000 [ACK] Seg=1 Ack=1 Win=8192 Len=0`

   **客户端发送一个 `[ACK]` 消息，表示收到服务端发送的包**，此时已经建立了连接，可以进行收发消息

### 为什么是三次握手？

简单理解就是：**三次是保证双方互相明确对方能收能发的最低值**，[详情可参考](https://www.zhihu.com/question/24853633)

::: warning 注意

这个说法挺有道理的：`三次握手这个说法不好，其实是双方各一次握手，各一次确认，其中一次握手和确认合并在一起`

:::









