---
title: 二进制数据 - 文件操作
date: 2021-10-21 15:00:00
permalink: /js/operation
categories:
  - 前端
  - JS
tags:
  - null
---

# 二进制数据 - 文件操作

## 下载自定义文件

方法：生成指定 `Blob` 对象 -> 生成临时 URL(或 base64) -> 利用 a 标签下载

<dom-test type="updateCustom" />

::: details 查看代码

```js
let debug = { hello: 'world' };
let blob = new Blob([JSON.stringify(debug, null, 2)], {
  type: 'application/json', // 文件 MIME
});
let link = document.createElement('a');

link.download = 'hello.json';
link.href = URL.createObjectURL(blob);
link.click();
URL.revokeObjectURL(link.href);
```

:::

## 下载服务器资源

下载资源一般分如下情况

|      | 浏览器能够预览的资源(html、img、pdf等) | 不能预览的资源(zip、exe等资源) |
| ---- | -------------------------------------- | ------------------------------ |
| 同域 |                                        |                                |
| 跨域 |                                        |                                |

::: warning 注意

a 标签的 `download` 在 IE、Safari 上不支持，此时可以使用 `navigator.msSaveBlob` 下载，但是只能下载 Blob 的资源，具体百度一下。

:::

<dom-test type="updateResources" />
