---
title: 调试
date: 2021-10-21 15:00:00
permalink: /vscode/debug
categories: -- 工程化
  -- vscode
tags:
  - null
---

# 调试

vscode 内置 Node.js 的调试器，如需其他的调试器，可安装其扩展

## node 调试

有几种方式用于调试 Node.js 

* auto attach(自动附加)：以附加模式调试在集成终端中运行的进程
*  JavaScript debug terminal(JavaScript 调试终端)：类似于第一种
* launch.json：使用配置文件

### auto attach(自动附加)

启动 auto attach 功能，Node 调试器会自动附加到某些集成终端启动的 Node.js 进程。

启动方式：

* `Ctrl + Shift + p` 启动命令面板 -> `Toggle Auto Attach` 或 `切换开关自动附加` 命令 -> 选择具体模式
* 当激活后，在底部状态栏中会显示，点击可进行操作

自动附加有三种模式：

* always(始终)：将调试所有在集成终端中启动的所有 Node.js 进程

* smart(智能)：默认值，通过 `node_modules` 启动的程序不会被调试，可通过 `debug.javascript.autoAttachSmartPattern` 进行配置

* onlyWithFlag(仅带标志)：只调试带有`--inspect`或`--inspect-brk`标志的进程。

  ```js
  node --inspect .\app.js
  ```

::: tip 附加配置

可以在 `settings.json` 中配置调试的其他配置项

[详见](https://code.visualstudio.com/docs/nodejs/nodejs-debugging#_additional-configuration)

:::

### JavaScript debug terminal(JavaScript 调试终端)

与 [auto attach](#auto-attach-自动附加) 类似, 区别在于 **通过启动一个终端, 在这个终端启动的 node 进程会被附加调试**.

启动方式:

* `Ctrl + Shift + p` 启动命令面板 -> `JavaScript Debug Terminal` 命令 -> 在打开的终端处启动命令
* 直接在终端下拉菜单中选择创建 JavaScript 调试终端来创建调试终端

通过 `资源管理器` 的 `NPM脚本` 栏中点击调试也是通过这种方式进行调试的

::: tip 附加配置

与  [auto attach](#auto-attach-自动附加) 类似

:::

## 启动配置(launch.json)

通过配置 `launch.json` 文件,  可以实现配置的多样化、定制化。

`launch.json` 通过配置在工作区或项目文件夹的 `.vscode` 文件夹中的 `launch.json` 文件, 虽然也可以[全局配置](https://code.visualstudio.com/docs/editor/debugging#_global-launch-configuration),  但并不推荐

