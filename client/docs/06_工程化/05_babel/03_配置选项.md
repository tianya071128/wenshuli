---
title: 配置选项
date: 2021-10-21 15:00:00
permalink: /babel/configOptions
categories: -- 工程化
  -- babel
tags:
  - null
---

# 配置选项

[具体配置选项可查看官网](https://babel.docschina.org/docs/en/options/)

## 插件和预设选项

### plugins：插件数组

* 类型：`Array<PluginEntry | Plugin>` - `PluginEntry` 见下方
* 默认值：`[]`

处理此文件时要激活的插件数组。

### presets：预设数组

* 类型：`Array<PresetEntry>` - `PresetEntry` 见下方
* 默认值：`[]`

处理此文件时要激活的一组预设。

注意：预设的格式与插件相同，只是名称规范化需要“preset-”而不是“plugin-”，并且预设不能是`Plugin`.

### Plugin/Preset entries：插件/预设 配置格式

* `PluginEntry` / `PresetEntry`：插件和预设注册的格式

单个插件/预设可以有以下几种不同的结构：

- `EntryTarget`- 个人插件
- `[EntryTarget, EntryOptions]`- 带有选项的单个插件
- `[EntryTarget, EntryOptions, string]`- 带有选项和名称的单个插件(名称是用来合并同一插件的)
- `ConfigItem`- 由`babel.createConfigItem()`创建的插件配置项。

```js
plugins: [
  // EntryTarget
  '@babel/plugin-transform-classes',

  // [EntryTarget, EntryOptions]
  ['@babel/plugin-transform-arrow-functions', { spec: true }],

  // [EntryTarget, EntryOptions, string]
  ['@babel/plugin-transform-for-of', { loose: true }, "some-name"],

  // ConfigItem
  babel.createConfigItem(require("@babel/plugin-transform-spread")),
],
```

`[EntryTarget, EntryOptions, string]`各个选项的意义如下：

- `EntryTarget`：类型：`string | {} | Function`，可以来自几个不同的源

  - `string`：`babel` 内部会 `require` 的插件/预设标识符。标识符将通过[名称规范化](https://babel.docschina.org/docs/en/options/#name-normalization)后传递给插件/预设。
  - `{} | Function`：用户自身 `require` 一个实际的插件/预设对象或函数。

- `EntryOptions`：类型：`undefined | {} | false`，选项在执行时传递给每个插件/预设。

  - `undefined | {}`：`undefined`将被规范化为一个空对象。

  - `false`：表示这个插件/预设被禁用，在进行排序时会很有用，但需要一个单独的条件来决定是否启用了某些功能

    ```js
    plugins: [
      'one',
      ['two', false], // 会被禁用这个插件
      'three',
    ],
    overrides: [{
      test: "./src",
      plugins: [
        'two', // 运用在 src 文件时，会启用这个插件，并且在 'one' 和 'three' 之间执行
      ]
    }]
    ```

- `string`：为每个插件/预设实例分配一个名称。当想要实例化一个插件的两个独立实例，必须为每个实例分配一个名称以消除它们的歧义。

## 合并配置项

### Plugin/Preset 合并
