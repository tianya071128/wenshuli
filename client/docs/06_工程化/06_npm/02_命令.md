---
title: npm 命令
date: 2021-10-21 15:00:00
permalink: /npm/command
categories: -- 工程化
  -- npm
tags:
  - null
---

# 命令

## 创建 package.json 文件

[`npm init` 命令](https://docs.npmjs.com/cli/v8/commands/npm-init)用来创建一个 `package.json` 文件

```bash
npm init <package-spec> (等同于 `npx <package-spec>)
npm init <@scope> (等同于 `npx <@scope>/create`)

aliases: create, innit
```

几个示例：

* 使用 `create-react-app` 创建一个新的基于 React 的项目：

  ```bash
  $ npm init react-app ./my-react-app
  ```

* 使用旧版 `init` 生成一个普通的旧 `package.json`：

  ```bash
  $ npm init
  ```

* 生成它而不让它问任何问题：

  ```bash
  $ npm init -y
  ```

## 更新包版本

[`npm version` 命令](https://docs.npmjs.com/cli/v8/commands/npm-version)用于更新包版本

```bash
npm version [<newversion> | major | minor | patch | premajor | preminor | prepatch | prerelease | from-git]

alias: verison
```

示例：

* 更新包版本到指定版本

  ```bash
  $ npm version 1.0.1
  v1.0.1
  ```

* 更新包版本到 `prepatch`，预补丁版本：

  ```bash
  $ npm version prepatch
  v1.0.2-0
  ```

* 允许相同版本更新，默认情况下不会更新到相同版本：

  ```bash
  $ npm version 1.0.2-0 --allow-same-version
  v1.0.2-0
  ```

## 发布包

[`npm publish` 命令](https://docs.npmjs.com/cli/v8/commands/npm-publish)用于发布包(更新包)

```bash
npm publish <package-spec>
```

示例：

* 发布包(更新包)：

  ```bash
  $ npm publish
  npm notice
  npm notice package: wenzubiao_package_demo@1.0.3-0
  npm notice === Tarball Contents ===
  npm notice 96B  index.js
  npm notice 281B package.json
  npm notice 58B  README.md
  npm notice === Tarball Details ===
  npm notice name:          wenzubiao_package_demo
  npm notice version:       1.0.3-0
  npm notice package size:  502 B
  npm notice unpacked size: 435 B
  npm notice shasum:        db47d4e909068c70ec3647012f1e30b7d747b9c7
  npm notice integrity:     sha512-KGoDiOEPgIbIz[...]+QQTw1Pce+6Yg==
  npm notice total files:   3
  npm notice
  + wenzubiao_package_demo@1.0.3-0
  ```

* 发布包同时分发标签：

  ```bash
  $ npm publish --tag ceshi
  npm notice
  npm notice package: wenzubiao_package_demo@1.0.1
  npm notice === Tarball Contents ===
  npm notice 96B  index.js
  npm notice 279B package.json
  npm notice 58B  README.md
  npm notice === Tarball Details ===
  npm notice name:          wenzubiao_package_demo
  npm notice version:       1.0.1
  npm notice package size:  500 B
  npm notice unpacked size: 433 B
  npm notice shasum:        e1db97b27505f76c9dbfb21e09cbf1a3a559a890
  npm notice integrity:     sha512-WouV4K+OGy6Yh[...]ZMH42wL0X6MAg==
  npm notice total files:   3
  npm notice
  + wenzubiao_package_demo@1.0.1
  ```




## 修改包分发标签

[`npm publish` 命令](https://docs.npmjs.com/cli/v8/commands/npm-publish)用于发布包(更新包)

```bash
npm dist-tag add <package-spec (with version)> [<tag>]
npm dist-tag rm <package-spec> <tag>
npm dist-tag ls [<package-spec>]

alias: dist-tags
```

在包上添加、删除和显示分发标签：

* add：使用指定的标签标记指定版本的包，如果没有指定，则使用 `--tag` 配置。
* rm：从包中清除一个不再使用的标签。
* ls：显示包的所有 `dist-tags`，默认为当前前缀中的包。

示例：

* 显示包的所有标签(也可在包的根目录上不指定包名，默认取终端目录的包)

  ```bash
  $ npm dist-tag ls wenzubiao_package_demo
  ceshi: 1.0.1
  ceshiyixia: 1.0.1
  latest: 1.0.3-0
  ```

* 添加标签：

  ```bash
  $ npm dist-tag add wenzubiao_package_demo@1.0.0 newTag
  +newTag: wenzubiao_package_demo@1.0.0
  ```



## 在 CLI 中登录账号

1. 在命令行上，输入以下命令：

   ```bash
   npm login
   ```

2. 出现提示时，输入您的用户名、密码和电子邮件地址等信息，如果启用了双重身份验证，则在出现提示时输入一次性密码。

3. 测试您是否已成功登录，输入如下命令，应该是出现 npm 用户名

   ```bash
   npm whoami
   ```

如下图：

![image-20220627100948752](/img/145.png)

## 用户账号信息

`npm profile` 用来配置账号相关信息，详细可参阅 [`npm profile` 配置文档](https://docs.npmjs.com/cli/v8/commands/npm-profile)

```bash
npm profile enable-2fa [auth-only|auth-and-writes]
npm profile disable-2fa
npm profile get [<key>]
npm profile set <key> <value>
```

### 查看用户账号信息

要从 CLI 查看用户配置信息，输入如下命令：

```bash
npm profile get
```

![image-20220627101528795](/img/146.png)

### 设置用户账号信息

在 CLI 中，可以设置用户账号的如下属性：`email`、`two-factor auth`、`fullname`、`homepage`、`freenode`、`twitter`、`github`、`password`

1. 在命令行上，键入如下命令，将 property 替换为属性的名称，并将 value 替换为新值： ：

   ```bash
   npm profile set <prop> <value>
   ```

2. 如果需要输入密码，当出现提示时，提供您当前的密码。

3. 如果您已对帐户启用双重身份验证，则在出现提示时输入一次性密码。

![image-20220627102507464](/img/147.png)









