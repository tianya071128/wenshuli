<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
</html>
<script>
  var canvas = document.createElement('canvas');
  var context = canvas.getContext('2d'); //返回一个用于在画布上绘图的环境，当前唯一的合法值是 "2d"，它指定了二维绘图，返回一个 CanvasRenderingContext2D 对象，使用它可以绘制到 Canvas 元素中

  var url = './01.png'; //图片URL
  var urlNumber = 1; //要渲染的图片数
  var w = 300; //canvas的宽
  var h = 300; //canvas的高

  var img = new Image();
  img.crossOrigin = 'Anonymous'; //解决Canvas.toDataURL 图片跨域问题
  img.src = url;

  //渲染方法
  var imgs = function() {
    context.drawImage(img, 0, 0, w, h);
    //导出
    var base64Img = canvas.toDataURL('image/jpg');
    console.log(base64Img);
  };

  img.onload = function() {
    urlNumber -= 1;
    if (urlNumber === 0) {
      imgs();
    }
  };
</script>
